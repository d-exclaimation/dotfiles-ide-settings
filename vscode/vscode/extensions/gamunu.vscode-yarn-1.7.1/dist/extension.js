module.exports=function(n){var e={};function t(o){if(e[o])return e[o].exports;var r=e[o]={i:o,l:!1,exports:{}};return n[o].call(r.exports,r,r.exports,t),r.l=!0,r.exports}return t.m=n,t.c=e,t.d=function(n,e,o){t.o(n,e)||Object.defineProperty(n,e,{enumerable:!0,get:o})},t.r=function(n){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(n,"__esModule",{value:!0})},t.t=function(n,e){if(1&e&&(n=t(n)),8&e)return n;if(4&e&&"object"==typeof n&&n&&n.__esModule)return n;var o=Object.create(null);if(t.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:n}),2&e&&"string"!=typeof n)for(var r in n)t.d(o,r,function(e){return n[e]}.bind(null,r));return o},t.n=function(n){var e=n&&n.__esModule?function(){return n.default}:function(){return n};return t.d(e,"a",e),e},t.o=function(n,e){return Object.prototype.hasOwnProperty.call(n,e)},t.p="",t(t.s=8)}([function(n,e){n.exports=require("vscode")},function(n,e,t){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const o=t(5),r=t(0),a=t(7),i=t(9),s=t(2),c=t(4),u=t(11);e.terminal=null,e.childs=new Map,e.terminate=function(n){const t=e.childs.get(n);t.child&&(a.outputChannel.appendLine(""),a.outputChannel.appendLine(`Killing process: ${t.cmd} (pid:${n})`),a.outputChannel.appendLine(""),t.killedByUs=!0,u(n,"SIGTERM"))},e.runCommand=function(n,t){let u=r.workspace.rootPath;const d=r.workspace.getConfiguration("yarn").packageJson;d&&(u=c.join(r.workspace.rootPath,d).replace(/package.json$/i,""));const p=r.window.activeTextEditor;p&&p.document.fileName.endsWith("package.json")&&(u=p.document.fileName.replace(/package.json$/i,"")),t&&t.fsPath&&(u=t.fsPath.replace(/package.json$/i,""));const l={cwd:u,env:process.env};s.useTerminal()?"function"==typeof r.window.createTerminal?function(n,t){const o=Array.from(n);e.terminal||(e.terminal=r.window.createTerminal("Yarn"));if(e.terminal.show(),t){const n=t.replace(/\\/g,"\\\\");e.terminal.sendText(["cd",`"${n}"`].join(" "))}o.splice(0,0,s.getYarnBin()),e.terminal.sendText(o.join(" "))}(n,u):function(n,e){i.runInTerminal(s.getYarnBin(),n,e)}(n,l):function(n,t){const i=s.getYarnBin()+" "+n.join(" "),c=o.exec(i,{cwd:t,env:process.env});e.childs.set(c.pid,{child:c,cmd:i}),c.on("exit",(n,t)=>{("SIGTERM"===t||e.childs.get(c.pid).killedByUs)&&(a.outputChannel.appendLine(""),a.outputChannel.appendLine("Successfully killed process"),a.outputChannel.appendLine(""),a.outputChannel.appendLine("--------------------"),a.outputChannel.appendLine("")),0===n&&(a.outputChannel.appendLine(""),a.outputChannel.appendLine("--------------------"),a.outputChannel.appendLine(""),s.dontHideOutputOnSuccess()||a.outputChannel.hide()),e.childs.delete(c.pid)}),a.outputChannel.appendLine(i),a.outputChannel.appendLine("");const u=function(n){a.outputChannel.append(n)};c.stderr.on("data",u),c.stdout.on("data",u),a.outputChannel.show(r.ViewColumn.Three)}(n,u)}},function(n,e,t){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const o=t(6),r=t(4),a=t(0);e.packageExists=function(n){if(!a.workspace.rootPath)return!1;let e=r.join(a.workspace.rootPath,"package.json");const t=a.workspace.getConfiguration("yarn").packageJson;t&&(e=r.join(a.workspace.rootPath,t));const i=a.window.activeTextEditor;i&&i.document.fileName.endsWith("package.json")&&(e=i.document.fileName),n&&n.fsPath&&(e=n.fsPath);try{const n=o.statSync(e);return n&&n.isFile()}catch(n){return!1}},e.useTerminal=function(){return a.workspace.getConfiguration("yarn").runInTerminal},e.getYarnBin=function(){return a.workspace.getConfiguration("yarn").bin||"yarn"},e.dontHideOutputOnSuccess=function(){return a.workspace.getConfiguration("yarn").dontHideOutputOnSuccess}},function(n,e,t){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const o=t(0);e.noPackageError=function(){o.window.showErrorMessage("Cannot read 'package.json'")},e.alreadyExistsError=function(){o.window.showErrorMessage("'package.json' already exists")},e.noProjectOpenError=function(){o.window.showErrorMessage("No project open")},e.noLastScript=function(){o.window.showErrorMessage("No script executed yet")},e.noTestScript=function(){o.window.showErrorMessage("No test script in your package.json file")},e.noStartScript=function(){o.window.showErrorMessage("No start script in your package.json file")},e.noBuildScript=function(){o.window.showErrorMessage("No build script in your package.json file")},e.noScriptsInfo=function(){o.window.showInformationMessage("No scripts are defined in 'package.json'")},e.cannotWriteError=function(){o.window.showErrorMessage("Cannot write 'package.json'")},e.createdInfo=function(){o.window.showInformationMessage("'package.json' created successfuly")},e.noValueError=function(){o.window.showErrorMessage("No value entered")},e.invalidTagError=function(){o.window.showErrorMessage("Tag is invalid")}},function(n,e){n.exports=require("path")},function(n,e){n.exports=require("child_process")},function(n,e){n.exports=require("fs")},function(n,e,t){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const o=t(0).window.createOutputChannel("yarn");e.outputChannel=o},function(n,e,t){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const o=t(0),r=t(7),a=t(1),i=t(12),s=t(13),c=t(14),u=t(15),d=t(16),p=t(17),l=t(18),f=t(19);e.activate=function(n){const e=[o.commands.registerCommand("yarn-script.installPackages",s.yarnInstallPackages),o.commands.registerCommand("yarn-script.addPackages",c.yarnAddPackages),o.commands.registerCommand("yarn-script.addPackage",c.yarnAddPackage),o.commands.registerCommand("yarn-script.addPackageDev",c.yarnAddPackageDev),o.commands.registerCommand("yarn-script.runScript",d.yarnRunScript),o.commands.registerCommand("yarn-script.build",d.yarnBuild),o.commands.registerCommand("yarn-script.runScriptLast",d.yarnRunLastScript),o.commands.registerCommand("yarn-script.init",i.default),o.commands.registerCommand("yarn-script.removePackage",u.yarnRemovePackage),o.commands.registerCommand("yarn-script.publish",p.yarnPublish),o.commands.registerCommand("yarn-script.raw",l.yarnRawCommand),o.commands.registerCommand("yarn-script.terminate",f.default),o.commands.registerCommand("yarn-script.test",d.yarnTest),o.commands.registerCommand("yarn-script.start",d.yarnStart)];n.subscriptions.push(...e,r.outputChannel)},e.deactivate=function(){a.terminal&&a.terminal.dispose()}},function(n,e,t){"use strict";(function(n){var o=t(5),r=t(4),a=t(10);e.runInTerminal=function(n,e,t){return i(n,e||[],t).then((function(n){var e=n;return e.kill2=function(){return s(n)},e}))};var i=/^win/.test(process.platform)?function(n,e,t){return e=["/c","start","/wait","cmd.exe","/c",'"'+n+" "+e.map(u).join(" ")+' & pause"'],(t=t||{}).windowsVerbatimArguments=!0,c("cmd.exe",e,t)}:"darwin"===process.platform?function(e,t,o){return c("/usr/bin/osascript",t=[r.join(n,"launcher.scpt"),"cd",a.format("'%s'",o.cwd),";",e].concat(t),o)}:function(n,e,t){var o="";e.length>0&&(o='"'+e.join('" "')+'"');var r="";t.cwd&&(r=a.format('cd "%s"',t.cwd));var i=a.format('%s; "%s" %s ; echo; read -p "%s" -n1;',r,n,o,"Press any key to continue...");return c("/usr/bin/gnome-terminal",e=["-x","bash","-c",a.format("''%s''",i)],t)},s=/^win/.test(process.platform)?function(n){if(n)return new Promise((function(e,t){n.once("exit",(function(n,t){e(n)})),o.exec("taskkill /F /T /PID "+n.pid,(function(n,e,o){n&&t(n)}))}))}:function(n){if(n)return new Promise((function(e,t){n.once("exit",(function(n,t){e(n)})),n.once("error",(function(n){t(n)})),n.kill("SIGTERM")}))};function c(n,e,t){return new Promise((function(r,a){var i=o.spawn(n,e,t);i.on("error",a),setTimeout((function(n){return r(i)}),0)}))}function u(n){return n&&-1!==n.indexOf(" ")&&'"'!==n[0]&&'"'!==n[n.length-1]?'"'+n+'"':n}}).call(this,"/")},function(n,e){n.exports=require("util")},function(n,e,t){"use strict";var o=t(5),r=o.spawn,a=o.exec;function i(n,e,t){var o={};try{Object.keys(n).forEach((function(t){n[t].forEach((function(n){o[n]||(s(n,e),o[n]=1)})),o[t]||(s(t,e),o[t]=1)}))}catch(n){if(t)return t(n);throw n}if(t)return t()}function s(n,e){try{process.kill(parseInt(n,10),e)}catch(n){if("ESRCH"!==n.code)throw n}}function c(n,e,t,o,r){var a=o(n),i="";a.stdout.on("data",(function(n){n=n.toString("ascii");i+=n}));a.on("close",(function(a){delete t[n],0==a?i.match(/\d+/g).forEach((function(a){a=parseInt(a,10),e[n].push(a),e[a]=[],t[a]=1,c(a,e,t,o,r)})):0==Object.keys(t).length&&r()}))}n.exports=function(n,e,t){if("function"==typeof e&&void 0===t&&(t=e,e=void 0),n=parseInt(n),Number.isNaN(n)){if(t)return t(new Error("pid must be a number"));throw new Error("pid must be a number")}var o={},s={};switch(o[n]=[],s[n]=1,process.platform){case"win32":a("taskkill /pid "+n+" /T /F",t);break;case"darwin":c(n,o,s,(function(n){return r("pgrep",["-P",n])}),(function(){i(o,e,t)}));break;default:c(n,o,s,(function(n){return r("ps",["-o","pid","--no-headers","--ppid",n])}),(function(){i(o,e,t)}))}}},function(n,e,t){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const o=t(6),r=t(4),a=t(0),i=t(3),s=t(2);e.default=function(){if(!a.workspace.rootPath)return void i.noProjectOpenError();if(s.packageExists())return void i.alreadyExistsError();const n=r.basename(a.workspace.rootPath),e={name:n,version:"1.0.0",description:"",main:"index.js",scripts:{test:'echo "Error: no test specified" && exit 1'},author:"",license:"ISC"};a.window.showInputBox({prompt:"Package name",placeHolder:"Package name...",value:n}).then(n=>(n&&(e.name=n.toLowerCase()),a.window.showInputBox({prompt:"Version",placeHolder:"1.0.0",value:"1.0.0"}))).then(n=>(n&&(e.version=n.toString()),a.window.showInputBox({prompt:"Description",placeHolder:"Package description"}))).then(n=>(n&&(e.description=n.toString()),a.window.showInputBox({prompt:"main (entry point)",value:"index.js"}))).then(n=>(n&&(e.main=n.toString()),a.window.showInputBox({prompt:"Test script"}))).then(n=>(n&&(e.scripts.test=n.toString()),a.window.showInputBox({prompt:"Author"}))).then(n=>(n&&(e.author=n.toString()),a.window.showInputBox({prompt:"License",value:"ISC"}))).then(n=>{n&&(e.license=n.toString());const t=JSON.stringify(e,null,4),s=r.join(a.workspace.rootPath,"package.json");o.writeFile(s,t,n=>{n?i.cannotWriteError():(i.createdInfo(),a.workspace.openTextDocument(s).then(n=>{a.window.showTextDocument(n)}))})})}},function(n,e,t){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const o=t(2),r=t(3),a=t(1);e.yarnInstallPackages=function(n){o.packageExists(n)?a.runCommand(["install"],n):r.noPackageError()}},function(n,e,t){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const o=t(0),r=t(2),a=t(3),i=t(1);e.yarnAddPackages=function(){r.packageExists()?i.runCommand(["add"]):a.noPackageError()},e.yarnAddPackage=function(){return s(!1)},e.yarnAddPackageDev=function(){return s(!0)};const s=function(n){r.packageExists()?o.window.showInputBox({prompt:"Package to add",placeHolder:"lodash, underscore, ..."}).then(e=>{if(!e)return void a.noValueError();const t=e.split(" "),o=t.find(n=>"-D"===n||"--dev"===n||"-O"===n||"--optional"===n||"-E"===n||"--exact"===n),r=["add",...t];if(o)i.runCommand(r);else{const e=n?"--dev":"";i.runCommand([...r,e])}}):a.noPackageError()}},function(n,e,t){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const o=t(0),r=t(2),a=t(3),i=t(1);e.yarnRemovePackage=function(){return s()};const s=function(){r.packageExists()?o.window.showInputBox({prompt:"Package to remove",placeHolder:"lodash, underscore, ..."}).then(n=>{if(!n)return void a.noValueError();const e=["remove",...n.split(" ")];i.runCommand(e)}):a.noPackageError()}},function(n,e,t){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const o=t(4),r=t(6),a=t(0),i=t(3),s=t(1);let c;e.yarnRunScript=function(){const n=u();if(!n)return;const e=Object.keys(n).map(e=>({label:e,description:n[e]}));a.window.showQuickPick(e).then(n=>{c=n.label,s.runCommand(["run",n.label])})},e.yarnTest=function(){const n=u();n&&(n.test?(c="test",s.runCommand(["run","test"])):i.noTestScript())},e.yarnStart=function(){const n=u();n&&(n.start?(c="start",s.runCommand(["run","start"])):i.noStartScript())},e.yarnBuild=function(){const n=u();n&&(n.build?(c="build",s.runCommand(["run","build"])):i.noBuildScript())},e.yarnRunLastScript=function(){c?s.runCommand(["run",c]):i.noLastScript()};const u=function(){let n=o.join(a.workspace.rootPath,"package.json");const e=a.workspace.getConfiguration("yarn").packageJson;e&&(n=o.join(a.workspace.rootPath,e));const t=a.window.activeTextEditor;t&&t.document.fileName.endsWith("package.json")&&(n=t.document.fileName);try{const e=r.readFileSync(n).toString(),t=JSON.parse(e);return t.scripts?t.scripts:(i.noScriptsInfo(),null)}catch(n){return i.noPackageError(),null}}},function(n,e,t){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const o=t(0),r=t(2),a=t(3),i=t(1);e.yarnPublish=function(){s("publish")};const s=function(n){r.packageExists()?o.window.showInputBox({prompt:"Optional tag (enter to skip tag)",placeHolder:"latest, 1.0.0, ..."}).then(e=>{e?e.includes(" ")?a.invalidTagError():i.runCommand([n,"--tag",e]):i.runCommand([n])}):a.noPackageError()}},function(n,e,t){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const o=t(0),r=t(2),a=t(3),i=t(1);e.yarnRawCommand=function(){r.packageExists()?o.window.showInputBox({prompt:"yarn command",placeHolder:"install lodash@latest, ..."}).then(n=>{if(!n)return void a.noValueError();const e=n.split(" ");i.runCommand(e)}):a.noPackageError()}},function(n,e,t){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const o=t(1),r=t(2),a=t(0);class i{constructor(n,e,t){this.label=n,this.description=e,this.pid=t}}e.default=function(){if(r.useTerminal())a.window.showInformationMessage('Killing is only supported when the setting "runInTerminal" is "false"');else{const n=[];o.childs.forEach(e=>{n.push(new i(e.cmd,`(pid: ${e.child.pid})`,e.child.pid))}),a.window.showQuickPick(n).then(n=>{n&&o.terminate(n.pid)})}}}]);
//# sourceMappingURL=extension.js.map